{"id":"../../controllers/reviewController.js","dependencies":[{"name":"C:\\Users\\lkw06\\Desktop\\complete-node-bootcamp\\4-natours\\starter\\package.json","includedInParent":true,"mtime":1658673214348},{"name":"../utils/appError","loc":{"line":1,"column":26,"index":26},"parent":"C:\\Users\\lkw06\\Desktop\\complete-node-bootcamp\\4-natours\\starter\\controllers\\reviewController.js","resolved":"C:\\Users\\lkw06\\Desktop\\complete-node-bootcamp\\4-natours\\starter\\utils\\appError.js"},{"name":"./../models/reviewModel","loc":{"line":2,"column":23,"index":72},"parent":"C:\\Users\\lkw06\\Desktop\\complete-node-bootcamp\\4-natours\\starter\\controllers\\reviewController.js","resolved":"C:\\Users\\lkw06\\Desktop\\complete-node-bootcamp\\4-natours\\starter\\models\\reviewModel.js"},{"name":"../utils/catchAsyncError","loc":{"line":3,"column":32,"index":133},"parent":"C:\\Users\\lkw06\\Desktop\\complete-node-bootcamp\\4-natours\\starter\\controllers\\reviewController.js","resolved":"C:\\Users\\lkw06\\Desktop\\complete-node-bootcamp\\4-natours\\starter\\utils\\catchAsyncError.js"},{"name":"./handlerFactory","loc":{"line":4,"column":24,"index":187},"parent":"C:\\Users\\lkw06\\Desktop\\complete-node-bootcamp\\4-natours\\starter\\controllers\\reviewController.js","resolved":"C:\\Users\\lkw06\\Desktop\\complete-node-bootcamp\\4-natours\\starter\\controllers\\handlerFactory.js"}],"generated":{"js":"var AppErrors = require('../utils/appError');\n\nvar Review = require('./../models/reviewModel');\n\nvar catchAsyncError = require('../utils/catchAsyncError');\n\nvar factory = require('./handlerFactory'); // exports.getAllReviews = async (request, response) => {\n//     let filter;\n//     if(request.params.tourId){\n//         filter = { tour: request.params.tourId };\n//     }\n//     const reviews = await Review.find(filter);\n//     response.status(200).json({status: 'success', result: reviews.length, data: {reviews: reviews}});\n// }\n\n\nexports.getAllReviews = factory.getAll(Review);\n\nexports.setTourUserIds = function (request, response, next) {\n  // Nested Routes\n  if (!request.body.tour) {\n    request.body.tour = request.params.tourId;\n  }\n\n  if (!request.body.user) {\n    request.body.user = request.user.id;\n  }\n\n  next();\n}; // exports.createReview = catchAsyncError(async (request, response, next) => {\n//     const newReview = await Review.create(request.body)\n//     response.status(201).json({status: 'success', data:{review: newReview}})\n// });\n\n\nexports.getReview = factory.getOne(Review);\nexports.createReview = factory.createOne(Review);\nexports.updateReview = factory.updateOne(Review);\nexports.deleteReview = factory.deleteOne(Review);"},"sourceMaps":{"js":{"mappings":[{"generated":{"line":1,"column":0},"source":"../../controllers/reviewController.js","original":{"line":1,"column":0}},{"generated":{"line":1,"column":4},"source":"../../controllers/reviewController.js","original":{"line":1,"column":6},"name":"AppErrors"},{"generated":{"line":1,"column":13},"source":"../../controllers/reviewController.js","original":{"line":1,"column":15}},{"generated":{"line":1,"column":16},"source":"../../controllers/reviewController.js","original":{"line":1,"column":18},"name":"require"},{"generated":{"line":1,"column":23},"source":"../../controllers/reviewController.js","original":{"line":1,"column":25}},{"generated":{"line":1,"column":24},"source":"../../controllers/reviewController.js","original":{"line":1,"column":26}},{"generated":{"line":1,"column":43},"source":"../../controllers/reviewController.js","original":{"line":1,"column":25}},{"generated":{"line":1,"column":44},"source":"../../controllers/reviewController.js","original":{"line":1,"column":0}},{"generated":{"line":3,"column":0},"source":"../../controllers/reviewController.js","original":{"line":2,"column":0}},{"generated":{"line":3,"column":4},"source":"../../controllers/reviewController.js","original":{"line":2,"column":6},"name":"Review"},{"generated":{"line":3,"column":10},"source":"../../controllers/reviewController.js","original":{"line":2,"column":12}},{"generated":{"line":3,"column":13},"source":"../../controllers/reviewController.js","original":{"line":2,"column":15},"name":"require"},{"generated":{"line":3,"column":20},"source":"../../controllers/reviewController.js","original":{"line":2,"column":22}},{"generated":{"line":3,"column":21},"source":"../../controllers/reviewController.js","original":{"line":2,"column":23}},{"generated":{"line":3,"column":46},"source":"../../controllers/reviewController.js","original":{"line":2,"column":22}},{"generated":{"line":3,"column":47},"source":"../../controllers/reviewController.js","original":{"line":2,"column":0}},{"generated":{"line":5,"column":0},"source":"../../controllers/reviewController.js","original":{"line":3,"column":0}},{"generated":{"line":5,"column":4},"source":"../../controllers/reviewController.js","original":{"line":3,"column":6},"name":"catchAsyncError"},{"generated":{"line":5,"column":19},"source":"../../controllers/reviewController.js","original":{"line":3,"column":21}},{"generated":{"line":5,"column":22},"source":"../../controllers/reviewController.js","original":{"line":3,"column":24},"name":"require"},{"generated":{"line":5,"column":29},"source":"../../controllers/reviewController.js","original":{"line":3,"column":31}},{"generated":{"line":5,"column":30},"source":"../../controllers/reviewController.js","original":{"line":3,"column":32}},{"generated":{"line":5,"column":56},"source":"../../controllers/reviewController.js","original":{"line":3,"column":31}},{"generated":{"line":5,"column":57},"source":"../../controllers/reviewController.js","original":{"line":3,"column":0}},{"generated":{"line":7,"column":0},"source":"../../controllers/reviewController.js","original":{"line":4,"column":0}},{"generated":{"line":7,"column":4},"source":"../../controllers/reviewController.js","original":{"line":4,"column":6},"name":"factory"},{"generated":{"line":7,"column":11},"source":"../../controllers/reviewController.js","original":{"line":4,"column":13}},{"generated":{"line":7,"column":14},"source":"../../controllers/reviewController.js","original":{"line":4,"column":16},"name":"require"},{"generated":{"line":7,"column":21},"source":"../../controllers/reviewController.js","original":{"line":4,"column":23}},{"generated":{"line":7,"column":22},"source":"../../controllers/reviewController.js","original":{"line":4,"column":24}},{"generated":{"line":7,"column":40},"source":"../../controllers/reviewController.js","original":{"line":4,"column":23}},{"generated":{"line":7,"column":41},"source":"../../controllers/reviewController.js","original":{"line":4,"column":0}},{"generated":{"line":7,"column":43},"source":"../../controllers/reviewController.js","original":{"line":6,"column":0}},{"generated":{"line":8,"column":0},"source":"../../controllers/reviewController.js","original":{"line":7,"column":0}},{"generated":{"line":9,"column":0},"source":"../../controllers/reviewController.js","original":{"line":8,"column":0}},{"generated":{"line":10,"column":0},"source":"../../controllers/reviewController.js","original":{"line":9,"column":0}},{"generated":{"line":11,"column":0},"source":"../../controllers/reviewController.js","original":{"line":10,"column":0}},{"generated":{"line":12,"column":0},"source":"../../controllers/reviewController.js","original":{"line":11,"column":0}},{"generated":{"line":13,"column":0},"source":"../../controllers/reviewController.js","original":{"line":12,"column":0}},{"generated":{"line":14,"column":0},"source":"../../controllers/reviewController.js","original":{"line":13,"column":0}},{"generated":{"line":17,"column":0},"source":"../../controllers/reviewController.js","original":{"line":14,"column":0},"name":"exports"},{"generated":{"line":17,"column":7},"source":"../../controllers/reviewController.js","original":{"line":14,"column":7}},{"generated":{"line":17,"column":8},"source":"../../controllers/reviewController.js","original":{"line":14,"column":8},"name":"getAllReviews"},{"generated":{"line":17,"column":21},"source":"../../controllers/reviewController.js","original":{"line":14,"column":0}},{"generated":{"line":17,"column":24},"source":"../../controllers/reviewController.js","original":{"line":14,"column":24},"name":"factory"},{"generated":{"line":17,"column":31},"source":"../../controllers/reviewController.js","original":{"line":14,"column":31}},{"generated":{"line":17,"column":32},"source":"../../controllers/reviewController.js","original":{"line":14,"column":32},"name":"getAll"},{"generated":{"line":17,"column":38},"source":"../../controllers/reviewController.js","original":{"line":14,"column":24}},{"generated":{"line":17,"column":39},"source":"../../controllers/reviewController.js","original":{"line":14,"column":39},"name":"Review"},{"generated":{"line":17,"column":45},"source":"../../controllers/reviewController.js","original":{"line":14,"column":24}},{"generated":{"line":17,"column":46},"source":"../../controllers/reviewController.js","original":{"line":14,"column":0}},{"generated":{"line":19,"column":0},"source":"../../controllers/reviewController.js","original":{"line":17,"column":0},"name":"exports"},{"generated":{"line":19,"column":7},"source":"../../controllers/reviewController.js","original":{"line":17,"column":7}},{"generated":{"line":19,"column":8},"source":"../../controllers/reviewController.js","original":{"line":17,"column":8},"name":"setTourUserIds"},{"generated":{"line":19,"column":22},"source":"../../controllers/reviewController.js","original":{"line":17,"column":0}},{"generated":{"line":19,"column":25},"source":"../../controllers/reviewController.js","original":{"line":17,"column":25}},{"generated":{"line":19,"column":35},"source":"../../controllers/reviewController.js","original":{"line":17,"column":26},"name":"request"},{"generated":{"line":19,"column":42},"source":"../../controllers/reviewController.js","original":{"line":17,"column":25}},{"generated":{"line":19,"column":44},"source":"../../controllers/reviewController.js","original":{"line":17,"column":35},"name":"response"},{"generated":{"line":19,"column":52},"source":"../../controllers/reviewController.js","original":{"line":17,"column":25}},{"generated":{"line":19,"column":54},"source":"../../controllers/reviewController.js","original":{"line":17,"column":45},"name":"next"},{"generated":{"line":19,"column":58},"source":"../../controllers/reviewController.js","original":{"line":17,"column":25}},{"generated":{"line":19,"column":60},"source":"../../controllers/reviewController.js","original":{"line":17,"column":54}},{"generated":{"line":20,"column":2},"source":"../../controllers/reviewController.js","original":{"line":18,"column":4}},{"generated":{"line":21,"column":2},"source":"../../controllers/reviewController.js","original":{"line":19,"column":4}},{"generated":{"line":21,"column":6},"source":"../../controllers/reviewController.js","original":{"line":19,"column":7}},{"generated":{"line":21,"column":7},"source":"../../controllers/reviewController.js","original":{"line":19,"column":8},"name":"request"},{"generated":{"line":21,"column":14},"source":"../../controllers/reviewController.js","original":{"line":19,"column":15}},{"generated":{"line":21,"column":15},"source":"../../controllers/reviewController.js","original":{"line":19,"column":16},"name":"body"},{"generated":{"line":21,"column":19},"source":"../../controllers/reviewController.js","original":{"line":19,"column":8}},{"generated":{"line":21,"column":20},"source":"../../controllers/reviewController.js","original":{"line":19,"column":21},"name":"tour"},{"generated":{"line":21,"column":24},"source":"../../controllers/reviewController.js","original":{"line":19,"column":4}},{"generated":{"line":21,"column":26},"source":"../../controllers/reviewController.js","original":{"line":19,"column":26}},{"generated":{"line":22,"column":4},"source":"../../controllers/reviewController.js","original":{"line":20,"column":8},"name":"request"},{"generated":{"line":22,"column":11},"source":"../../controllers/reviewController.js","original":{"line":20,"column":15}},{"generated":{"line":22,"column":12},"source":"../../controllers/reviewController.js","original":{"line":20,"column":16},"name":"body"},{"generated":{"line":22,"column":16},"source":"../../controllers/reviewController.js","original":{"line":20,"column":8}},{"generated":{"line":22,"column":17},"source":"../../controllers/reviewController.js","original":{"line":20,"column":21},"name":"tour"},{"generated":{"line":22,"column":21},"source":"../../controllers/reviewController.js","original":{"line":20,"column":8}},{"generated":{"line":22,"column":24},"source":"../../controllers/reviewController.js","original":{"line":20,"column":28},"name":"request"},{"generated":{"line":22,"column":31},"source":"../../controllers/reviewController.js","original":{"line":20,"column":35}},{"generated":{"line":22,"column":32},"source":"../../controllers/reviewController.js","original":{"line":20,"column":36},"name":"params"},{"generated":{"line":22,"column":38},"source":"../../controllers/reviewController.js","original":{"line":20,"column":28}},{"generated":{"line":22,"column":39},"source":"../../controllers/reviewController.js","original":{"line":20,"column":43},"name":"tourId"},{"generated":{"line":22,"column":45},"source":"../../controllers/reviewController.js","original":{"line":20,"column":8}},{"generated":{"line":23,"column":2},"source":"../../controllers/reviewController.js","original":{"line":21,"column":5}},{"generated":{"line":25,"column":2},"source":"../../controllers/reviewController.js","original":{"line":23,"column":4}},{"generated":{"line":25,"column":6},"source":"../../controllers/reviewController.js","original":{"line":23,"column":7}},{"generated":{"line":25,"column":7},"source":"../../controllers/reviewController.js","original":{"line":23,"column":8},"name":"request"},{"generated":{"line":25,"column":14},"source":"../../controllers/reviewController.js","original":{"line":23,"column":15}},{"generated":{"line":25,"column":15},"source":"../../controllers/reviewController.js","original":{"line":23,"column":16},"name":"body"},{"generated":{"line":25,"column":19},"source":"../../controllers/reviewController.js","original":{"line":23,"column":8}},{"generated":{"line":25,"column":20},"source":"../../controllers/reviewController.js","original":{"line":23,"column":21},"name":"user"},{"generated":{"line":25,"column":24},"source":"../../controllers/reviewController.js","original":{"line":23,"column":4}},{"generated":{"line":25,"column":26},"source":"../../controllers/reviewController.js","original":{"line":23,"column":26}},{"generated":{"line":26,"column":4},"source":"../../controllers/reviewController.js","original":{"line":24,"column":8},"name":"request"},{"generated":{"line":26,"column":11},"source":"../../controllers/reviewController.js","original":{"line":24,"column":15}},{"generated":{"line":26,"column":12},"source":"../../controllers/reviewController.js","original":{"line":24,"column":16},"name":"body"},{"generated":{"line":26,"column":16},"source":"../../controllers/reviewController.js","original":{"line":24,"column":8}},{"generated":{"line":26,"column":17},"source":"../../controllers/reviewController.js","original":{"line":24,"column":21},"name":"user"},{"generated":{"line":26,"column":21},"source":"../../controllers/reviewController.js","original":{"line":24,"column":8}},{"generated":{"line":26,"column":24},"source":"../../controllers/reviewController.js","original":{"line":24,"column":28},"name":"request"},{"generated":{"line":26,"column":31},"source":"../../controllers/reviewController.js","original":{"line":24,"column":35}},{"generated":{"line":26,"column":32},"source":"../../controllers/reviewController.js","original":{"line":24,"column":36},"name":"user"},{"generated":{"line":26,"column":36},"source":"../../controllers/reviewController.js","original":{"line":24,"column":28}},{"generated":{"line":26,"column":37},"source":"../../controllers/reviewController.js","original":{"line":24,"column":41},"name":"id"},{"generated":{"line":26,"column":39},"source":"../../controllers/reviewController.js","original":{"line":24,"column":8}},{"generated":{"line":27,"column":2},"source":"../../controllers/reviewController.js","original":{"line":25,"column":5}},{"generated":{"line":29,"column":2},"source":"../../controllers/reviewController.js","original":{"line":26,"column":4},"name":"next"},{"generated":{"line":29,"column":6},"source":"../../controllers/reviewController.js","original":{"line":26,"column":8}},{"generated":{"line":30,"column":0},"source":"../../controllers/reviewController.js","original":{"line":27,"column":1}},{"generated":{"line":30,"column":1},"source":"../../controllers/reviewController.js","original":{"line":17,"column":0}},{"generated":{"line":30,"column":3},"source":"../../controllers/reviewController.js","original":{"line":29,"column":0}},{"generated":{"line":31,"column":0},"source":"../../controllers/reviewController.js","original":{"line":31,"column":0}},{"generated":{"line":32,"column":0},"source":"../../controllers/reviewController.js","original":{"line":32,"column":0}},{"generated":{"line":33,"column":0},"source":"../../controllers/reviewController.js","original":{"line":33,"column":0}},{"generated":{"line":36,"column":0},"source":"../../controllers/reviewController.js","original":{"line":35,"column":0},"name":"exports"},{"generated":{"line":36,"column":7},"source":"../../controllers/reviewController.js","original":{"line":35,"column":7}},{"generated":{"line":36,"column":8},"source":"../../controllers/reviewController.js","original":{"line":35,"column":8},"name":"getReview"},{"generated":{"line":36,"column":17},"source":"../../controllers/reviewController.js","original":{"line":35,"column":0}},{"generated":{"line":36,"column":20},"source":"../../controllers/reviewController.js","original":{"line":35,"column":20},"name":"factory"},{"generated":{"line":36,"column":27},"source":"../../controllers/reviewController.js","original":{"line":35,"column":27}},{"generated":{"line":36,"column":28},"source":"../../controllers/reviewController.js","original":{"line":35,"column":28},"name":"getOne"},{"generated":{"line":36,"column":34},"source":"../../controllers/reviewController.js","original":{"line":35,"column":20}},{"generated":{"line":36,"column":35},"source":"../../controllers/reviewController.js","original":{"line":35,"column":35},"name":"Review"},{"generated":{"line":36,"column":41},"source":"../../controllers/reviewController.js","original":{"line":35,"column":20}},{"generated":{"line":36,"column":42},"source":"../../controllers/reviewController.js","original":{"line":35,"column":0}},{"generated":{"line":37,"column":0},"source":"../../controllers/reviewController.js","original":{"line":37,"column":0},"name":"exports"},{"generated":{"line":37,"column":7},"source":"../../controllers/reviewController.js","original":{"line":37,"column":7}},{"generated":{"line":37,"column":8},"source":"../../controllers/reviewController.js","original":{"line":37,"column":8},"name":"createReview"},{"generated":{"line":37,"column":20},"source":"../../controllers/reviewController.js","original":{"line":37,"column":0}},{"generated":{"line":37,"column":23},"source":"../../controllers/reviewController.js","original":{"line":37,"column":23},"name":"factory"},{"generated":{"line":37,"column":30},"source":"../../controllers/reviewController.js","original":{"line":37,"column":30}},{"generated":{"line":37,"column":31},"source":"../../controllers/reviewController.js","original":{"line":37,"column":31},"name":"createOne"},{"generated":{"line":37,"column":40},"source":"../../controllers/reviewController.js","original":{"line":37,"column":23}},{"generated":{"line":37,"column":41},"source":"../../controllers/reviewController.js","original":{"line":37,"column":41},"name":"Review"},{"generated":{"line":37,"column":47},"source":"../../controllers/reviewController.js","original":{"line":37,"column":23}},{"generated":{"line":37,"column":48},"source":"../../controllers/reviewController.js","original":{"line":37,"column":0}},{"generated":{"line":38,"column":0},"source":"../../controllers/reviewController.js","original":{"line":39,"column":0},"name":"exports"},{"generated":{"line":38,"column":7},"source":"../../controllers/reviewController.js","original":{"line":39,"column":7}},{"generated":{"line":38,"column":8},"source":"../../controllers/reviewController.js","original":{"line":39,"column":8},"name":"updateReview"},{"generated":{"line":38,"column":20},"source":"../../controllers/reviewController.js","original":{"line":39,"column":0}},{"generated":{"line":38,"column":23},"source":"../../controllers/reviewController.js","original":{"line":39,"column":23},"name":"factory"},{"generated":{"line":38,"column":30},"source":"../../controllers/reviewController.js","original":{"line":39,"column":30}},{"generated":{"line":38,"column":31},"source":"../../controllers/reviewController.js","original":{"line":39,"column":31},"name":"updateOne"},{"generated":{"line":38,"column":40},"source":"../../controllers/reviewController.js","original":{"line":39,"column":23}},{"generated":{"line":38,"column":41},"source":"../../controllers/reviewController.js","original":{"line":39,"column":41},"name":"Review"},{"generated":{"line":38,"column":47},"source":"../../controllers/reviewController.js","original":{"line":39,"column":23}},{"generated":{"line":38,"column":48},"source":"../../controllers/reviewController.js","original":{"line":39,"column":0}},{"generated":{"line":39,"column":0},"source":"../../controllers/reviewController.js","original":{"line":41,"column":0},"name":"exports"},{"generated":{"line":39,"column":7},"source":"../../controllers/reviewController.js","original":{"line":41,"column":7}},{"generated":{"line":39,"column":8},"source":"../../controllers/reviewController.js","original":{"line":41,"column":8},"name":"deleteReview"},{"generated":{"line":39,"column":20},"source":"../../controllers/reviewController.js","original":{"line":41,"column":0}},{"generated":{"line":39,"column":23},"source":"../../controllers/reviewController.js","original":{"line":41,"column":23},"name":"factory"},{"generated":{"line":39,"column":30},"source":"../../controllers/reviewController.js","original":{"line":41,"column":30}},{"generated":{"line":39,"column":31},"source":"../../controllers/reviewController.js","original":{"line":41,"column":31},"name":"deleteOne"},{"generated":{"line":39,"column":40},"source":"../../controllers/reviewController.js","original":{"line":41,"column":23}},{"generated":{"line":39,"column":41},"source":"../../controllers/reviewController.js","original":{"line":41,"column":41},"name":"Review"},{"generated":{"line":39,"column":47},"source":"../../controllers/reviewController.js","original":{"line":41,"column":23}},{"generated":{"line":39,"column":48},"source":"../../controllers/reviewController.js","original":{"line":41,"column":0}}],"sources":{"../../controllers/reviewController.js":"const AppErrors = require('../utils/appError');\r\nconst Review = require('./../models/reviewModel');\r\nconst catchAsyncError = require('../utils/catchAsyncError');\r\nconst factory = require('./handlerFactory');\r\n\r\n// exports.getAllReviews = async (request, response) => {\r\n//     let filter;\r\n//     if(request.params.tourId){\r\n//         filter = { tour: request.params.tourId };\r\n//     }\r\n//     const reviews = await Review.find(filter);\r\n//     response.status(200).json({status: 'success', result: reviews.length, data: {reviews: reviews}});\r\n// }\r\nexports.getAllReviews = factory.getAll(Review)\r\n\r\n\r\nexports.setTourUserIds = (request, response, next) => {\r\n    // Nested Routes\r\n    if(!request.body.tour){\r\n        request.body.tour = request.params.tourId;\r\n    }\r\n\r\n    if(!request.body.user){\r\n        request.body.user = request.user.id;\r\n    }\r\n    next();\r\n}\r\n\r\n// exports.createReview = catchAsyncError(async (request, response, next) => {\r\n\r\n//     const newReview = await Review.create(request.body)\r\n//     response.status(201).json({status: 'success', data:{review: newReview}})\r\n// });\r\n\r\nexports.getReview = factory.getOne(Review);\r\n\r\nexports.createReview = factory.createOne(Review);\r\n\r\nexports.updateReview = factory.updateOne(Review);\r\n\r\nexports.deleteReview = factory.deleteOne(Review);\r\n"},"lineCount":null}},"error":null,"hash":"c9c7786488d8bcdb6c4df5db54e20b27","cacheData":{"env":{}}}